(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{189:function(t,e,i){"use strict";var n=i(18),a=i.n(n),r=i(13),s=i(53),o=i(75),l={components:{TiptapVuetify:o.o},data:function(){return{extensions:[o.g,o.a,o.j,o.q,o.n,o.i,o.k,o.c,o.l,[o.f,{options:{levels:[1,2,3]}}],o.b,o.d,o.h,o.m,o.e]}}};function c(t,e,i,n,a,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,a)}function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p=i(202);i(208);p.GlobalWorkerOptions.workerSrc=pdfjsWorker;var v,f;e.a={data:function(){return{valid:!0,lazy:!1,loading:!1,judul:"",deskripsi:[],file:"",penerbit:"",pdf_url:"",totalPage:"",categori:[{id:"",description:"all"}],id_categori:"",nameRules:[function(t){return!!t||"Tidak Boleh Kosong"}],index_edit_deskripsi:null,tab:null,deskrip:{title:"",deskripsi:""},DataDialog:!1,kode:""}},methods:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(r.b)({setSnakbar:"snakbar/setSnakbar"}),{tambah:function(){null!=this.index_edit_deskripsi?this.deskripsi.splice(this.index_edit_deskripsi,1,this.deskrip):this.deskripsi.push({deskripsi:this.deskrip.deskripsi,title:this.deskrip.title}),this.cancle()},edit:function(t){this.index_edit_deskripsi=t,this.deskrip=this.deskripsi.find((function(e,i){return i===t})),this.DataDialog=!0},cancle:function(){this.deskrip={title:"",deskripsi:""},this.index_edit_deskripsi=null,this.DataDialog=!1},hapus:function(t){this.deskripsi.splice(t,1)},eventChange:(v=a.a.mark((function t(e){var i,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.target.files,this.file=i[0],n=new FileReader,t.next=5,function(){var t=new Uint8Array(this.result);p.getDocument(t).promise.then((function(t){console.log(t.numPages),document.getElementById("dataPages").innerText=t.numPages}))};case 5:return n.onload=t.sent,t.next=8,n.readAsArrayBuffer(this.file);case 8:case"end":return t.stop()}}),t,this)})),f=function(){var t=this,e=arguments;return new Promise((function(i,n){var a=v.apply(t,e);function r(t){c(a,i,n,r,s,"next",t)}function s(t){c(a,i,n,r,s,"throw",t)}r(void 0)}))},function(t){return f.apply(this,arguments)}),get_categori:function(){var t=this;this.axios.get("books/category",this.config).then((function(e){"/books"==window.location.pathname||"/books-list"==window.location.pathname?e.data.forEach((function(e){t.categori.push({id:e.id,description:e.description})})):t.categori=e.data}))}}),mixins:[s.a,l],computed:{backgroundColor:function(){return"background-color:".concat(this.color)}},created:function(){}}},203:function(t,e){},204:function(t,e){},205:function(t,e){},206:function(t,e){},207:function(t,e){},405:function(t,e,i){"use strict";i.r(e);var n=i(18),a=i.n(n);function r(t,e,i,n,a,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,a)}var s,o,l={name:"masterdata.edit",mixins:[i(189).a],methods:{save:(s=a.a.mark((function t(){var e,i,n=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.totalPage=document.getElementById("dataPages").textContent,this.loading=!0,e=(e=window.location.pathname).split("/"),e="".concat(e[1],"/").concat(e[2]),(i=new FormData).append("judul",this.judul),i.append("penerbit",this.penerbit),i.append("file",this.file),i.append("kode",this.kode),i.append("pages",this.totalPage),i.append("id_categori",this.id_categori),i.append("deskripsi",JSON.stringify(this.deskripsi)),i.append("_method","PUT"),t.next=16,this.axios.post(e,i,this.config).then((function(t){console.log(t),n.setSnakbar({status:!0,pesan:t.data.message,color_snakbar:"success"}),n.$router.go(-1)})).catch((function(t){400==t.response.status?n.setSnakbar({color_snakbar:"red",status:!0,pesan:t.response.data.message}):n.setSnakbar({status:!0,color_snakbar:"red",pesan:"Terjadi Kesalahan"}),console.log(t.response)}));case 16:this.loading=!1;case 17:case"end":return t.stop()}}),t,this)})),o=function(){var t=this,e=arguments;return new Promise((function(i,n){var a=s.apply(t,e);function o(t){r(a,i,n,o,l,"next",t)}function l(t){r(a,i,n,o,l,"throw",t)}o(void 0)}))},function(){return o.apply(this,arguments)}),go:function(){var t=this,e=window.location.pathname;this.axios.get(e,this.config).then((function(e){var i=e.data.book;t.judul=i.judul,t.kode=i.kode,t.penerbit=i.penerbit,t.deskripsi=i.deskripsi,t.totalPage=i.pages})).catch((function(t){return console.log(t.response)}))}},created:function(){this.go()}},c=i(19),d=Object(c.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-container",[i("BtnJudul",{attrs:{text:"Edit Buku"}}),t._v(" "),i("v-card",{style:t.border,attrs:{tile:""}},[i("v-card-text",[i("v-container",[i("v-form",{ref:"form",attrs:{"lazy-validation":t.lazy},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("label",{attrs:{for:"",align:"left"}},[t._v("Buku Baru")]),t._v(" "),i("v-text-field",{attrs:{rules:t.nameRules,label:"Kode buku",required:""},model:{value:t.kode,callback:function(e){t.kode=e},expression:"kode"}}),t._v(" "),i("v-text-field",{attrs:{rules:t.nameRules,label:"Judul buku",required:""},model:{value:t.judul,callback:function(e){t.judul=e},expression:"judul"}}),t._v(" "),i("v-text-field",{attrs:{rules:t.nameRules,label:"Penerbit",required:""},model:{value:t.penerbit,callback:function(e){t.penerbit=e},expression:"penerbit"}}),t._v(" "),i("v-select",{attrs:{items:t.categori,rules:[function(t){return!!t||"Item is required"}],label:"Kategori","item-text":"description","item-value":"id",required:""},model:{value:t.id_categori,callback:function(e){t.id_categori=e},expression:"id_categori"}}),t._v(" "),i("p",{staticStyle:{display:"none"},attrs:{id:"dataPages"}},[t._v(t._s(t.totalPage))]),t._v(" "),i("input",{ref:"foto_profile",attrs:{type:"file",id:"foto_profile",accept:""},on:{change:t.eventChange}}),t._v(" "),i("small",[t._v("Kosongkan jika tidak ganti file")]),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),i("v-btn",{attrs:{color:"success",depressed:"",small:"",dark:""},on:{click:function(e){t.DataDialog=!0}}},[t._v("\n                                Tambah Deskripsi\n                    ")]),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),t.deskripsi.length>0?i("div",{staticClass:"tab-deskripsi"},[i("v-tabs",{attrs:{"background-color":"cyan",dark:"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tabs-slider",{attrs:{color:"yellow"}}),t._v(" "),t._l(t.deskripsi,(function(e,n){return i("v-tab",{key:n},[t._v("\n                            "+t._s(e.title)+"\n                        ")])}))],2),t._v(" "),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.deskripsi,(function(e,n){return i("v-tab-item",{key:n},[i("v-card",[i("v-card-text",{staticStyle:{position:"relative"},domProps:{innerHTML:t._s(e.deskripsi)}}),t._v(" "),i("div",{staticStyle:{position:"absolute",top:"0px",right:"0px"}},[i("v-btn",{attrs:{depressed:"",dark:"","x-small":"",color:"success"},on:{click:function(e){return t.edit(n)}}},[i("v-icon",{attrs:{dark:"",small:""}},[t._v("fal fa-pencil")])],1),t._v(" "),i("v-btn",{attrs:{depressed:"",dark:"","x-small":"",color:"red"},on:{click:function(e){return t.hapus(n)}}},[i("v-icon",{attrs:{dark:"",small:""}},[t._v("fal fa-trash")])],1)],1)],1)],1)})),1)],1):t._e(),t._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",align:"right"}},[i("v-btn",{attrs:{disabled:!t.valid,color:"success",tile:"",loading:t.loading},on:{click:function(e){return t.save()}}},[t._v("\n                            Simpan\n                            ")])],1)],1)],1)],1)],1),t._v(" "),i("v-card-actions",{})],1)],1),t._v(" "),i("v-dialog",{attrs:{width:"650"},model:{value:t.DataDialog,callback:function(e){t.DataDialog=e},expression:"DataDialog"}},[i("v-card",{attrs:{tile:""}},[i("v-card-title",{staticClass:"white--text",style:t.backgroundColor,attrs:{"primary-title":""}},[t._v("\n      Tambah deskripsi\n    ")]),t._v(" "),i("v-card-text",[i("v-text-field",{attrs:{label:"Title",required:""},model:{value:t.deskrip.title,callback:function(e){t.$set(t.deskrip,"title",e)},expression:"deskrip.title"}}),t._v(" "),i("tiptap-vuetify",{attrs:{extensions:t.extensions},model:{value:t.deskrip.deskripsi,callback:function(e){t.$set(t.deskrip,"deskripsi",e)},expression:"deskrip.deskripsi"}})],1),t._v(" "),i("v-divider"),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"red",tile:""},on:{click:function(e){return t.cancle()}}},[t._v("\n        Cancel\n      ")]),t._v(" "),i("v-btn",{attrs:{color:"success",tile:""},on:{click:function(e){return t.tambah()}}},[t._v("\n        Save\n      ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=d.exports}}]);
//# sourceMappingURL=7.js.map