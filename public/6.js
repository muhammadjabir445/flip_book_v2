(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{189:function(t,e,i){"use strict";var n=i(74);e.a={components:{TiptapVuetify:n.o},data:function(){return{extensions:[n.g,n.a,n.j,n.q,n.n,n.i,n.k,n.c,n.l,[n.f,{options:{levels:[1,2,3]}}],n.b,n.d,n.h,n.m,n.e]}}}},203:function(t,e,i){"use strict";var n=i(18),a=i.n(n),r=i(13),s=i(53),o=i(189);function l(t,e,i,n,a,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,a)}function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function u(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d,p,v=i(340);i(346);v.GlobalWorkerOptions.workerSrc=pdfjsWorker,e.a={data:function(){return{valid:!0,lazy:!1,loading:!1,judul:"",deskripsi:[],file:"",penerbit:"",foto:"",pdf_url:"",totalPage:"",harga:0,hargaRules:[function(t){return!!t||"Harus diisi"},function(t){return/^[0-9,]+$/.test(t)||"Format salah"},function(t){return t.split(",").join("")<=1e8||"Tidak boleh lebih dari 100 juta"}],categori:[{id:"",description:"all"}],id_categori:"",nameRules:[function(t){return!!t||"Tidak Boleh Kosong"}],index_edit_deskripsi:null,tab:null,deskrip:{title:"",deskripsi:""},DataDialog:!1,kode:""}},methods:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){u(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},Object(r.b)({setSnakbar:"snakbar/setSnakbar"}),{tambah:function(){null!=this.index_edit_deskripsi?this.deskripsi.splice(this.index_edit_deskripsi,1,this.deskrip):this.deskripsi.push({deskripsi:this.deskrip.deskripsi,title:this.deskrip.title}),this.cancle()},edit:function(t){this.index_edit_deskripsi=t,this.deskrip=this.deskripsi.find((function(e,i){return i===t})),this.DataDialog=!0},cancle:function(){this.deskrip={title:"",deskripsi:""},this.index_edit_deskripsi=null,this.DataDialog=!1},hapus:function(t){this.deskripsi.splice(t,1)},eventChange:(d=a.a.mark((function t(e){var i,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.target.files,this.file=i[0],n=new FileReader,t.next=5,function(){var t=new Uint8Array(this.result);v.getDocument(t).promise.then((function(t){console.log(t.numPages),document.getElementById("dataPages").innerText=t.numPages}))};case 5:return n.onload=t.sent,t.next=8,n.readAsArrayBuffer(this.file);case 8:case"end":return t.stop()}}),t,this)})),p=function(){var t=this,e=arguments;return new Promise((function(i,n){var a=d.apply(t,e);function r(t){l(a,i,n,r,s,"next",t)}function s(t){l(a,i,n,r,s,"throw",t)}r(void 0)}))},function(t){return p.apply(this,arguments)}),get_categori:function(){var t=this;this.axios.get("books/category",this.config).then((function(e){"/books"==window.location.pathname||"/books-list"==window.location.pathname?e.data.forEach((function(e){t.categori.push({id:e.id,description:e.description})})):t.categori=e.data}))},formatAsCurrency:function(t,e){return e=e||0,null===t?null:""+t.toFixed(e).replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,")}}),mixins:[s.a,o.a],computed:{backgroundColor:function(){return"background-color:".concat(this.color)},harga_convert:{get:function(){return this.formatAsCurrency(this.harga,0)},set:function(t){this.harga=Number(t.replace(/[^0-9\.]/g,""))}}},created:function(){}}},341:function(t,e){},342:function(t,e){},343:function(t,e){},344:function(t,e){},345:function(t,e){},408:function(t,e,i){"use strict";i.r(e);var n=i(18),a=i.n(n);function r(t,e,i,n,a,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,a)}function s(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var s=t.apply(e,i);function o(t){r(s,n,a,o,l,"next",t)}function l(t){r(s,n,a,o,l,"throw",t)}o(void 0)}))}}var o,l,c={name:"masterdata.edit",mixins:[i(203).a],methods:{save:(l=s(a.a.mark((function t(){var e,i,n=this;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.totalPage=document.getElementById("dataPages").textContent,this.loading=!0,e=(e=window.location.pathname).split("/"),e="".concat(e[1],"/").concat(e[2]),(i=new FormData).append("judul",this.judul),i.append("penerbit",this.penerbit),i.append("file",this.file),i.append("kode",this.kode),i.append("pages",this.totalPage),i.append("harga",this.harga),i.append("id_categori",this.id_categori),i.append("deskripsi",JSON.stringify(this.deskripsi)),i.append("_method","PUT"),t.next=17,this.axios.post(e,i,this.config).then((function(t){console.log(t),n.setSnakbar({status:!0,pesan:t.data.message,color_snakbar:"success"}),n.$router.go(-1)})).catch((function(t){400==t.response.status?n.setSnakbar({color_snakbar:"red",status:!0,pesan:t.response.data.message}):n.setSnakbar({status:!0,color_snakbar:"red",pesan:"Terjadi Kesalahan"}),console.log(t.response)}));case 17:this.loading=!1;case 18:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)}),go:function(){var t=this,e=window.location.pathname;this.axios.get(e,this.config).then((function(e){var i=e.data.book;t.judul=i.judul,t.kode=i.kode,t.harga=i.harga,t.foto=i.foto,t.penerbit=i.penerbit,t.deskripsi=i.deskripsi,t.totalPage=i.pages})).catch((function(t){return console.log(t.response)}))}},created:(o=s(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.go();case 2:this.get_categori();case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},u=i(19),d=Object(u.a)(c,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-container",[i("BtnJudul",{attrs:{text:"Edit Buku"}}),t._v(" "),i("v-card",{style:t.border,attrs:{tile:""}},[i("v-card-text",[i("v-container",[i("v-form",{ref:"form",attrs:{"lazy-validation":t.lazy},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("label",{attrs:{for:"",align:"left"}},[t._v("Buku Baru")]),t._v(" "),i("v-row",[i("v-col",{attrs:{md:"8"}},[i("v-text-field",{attrs:{rules:t.nameRules,label:"Kode buku",required:""},model:{value:t.kode,callback:function(e){t.kode=e},expression:"kode"}}),t._v(" "),i("v-text-field",{attrs:{rules:t.nameRules,label:"Judul buku",required:""},model:{value:t.judul,callback:function(e){t.judul=e},expression:"judul"}}),t._v(" "),i("v-text-field",{attrs:{rules:t.nameRules,label:"Penerbit",required:""},model:{value:t.penerbit,callback:function(e){t.penerbit=e},expression:"penerbit"}}),t._v(" "),i("v-text-field",{attrs:{outlined:"",rules:t.hargaRules,label:"Harga",required:""},model:{value:t.harga_convert,callback:function(e){t.harga_convert=e},expression:"harga_convert"}}),t._v(" "),i("v-select",{attrs:{items:t.categori,rules:[function(t){return!!t||"Item is required"}],label:"Kategori","item-text":"description","item-value":"id",required:""},model:{value:t.id_categori,callback:function(e){t.id_categori=e},expression:"id_categori"}})],1),t._v(" "),i("v-col",{attrs:{md:"4"}},[i("td",{staticClass:"text-left"},[t.foto?i("v-img",{attrs:{src:t.foto}}):t._e(),t._v("\n                                "+t._s(t.foto?"":"Sedang diproses")+"\n                            ")],1)])],1),t._v(" "),i("p",{staticStyle:{display:"none"},attrs:{id:"dataPages"}},[t._v(t._s(t.totalPage))]),t._v(" "),i("input",{ref:"foto_profile",attrs:{type:"file",id:"foto_profile",accept:""},on:{change:t.eventChange}}),t._v(" "),i("small",[t._v("Kosongkan jika tidak ganti file")]),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),i("v-btn",{attrs:{color:"success",depressed:"",small:"",dark:""},on:{click:function(e){t.DataDialog=!0}}},[t._v("\n                                Tambah Deskripsi\n                    ")]),t._v(" "),i("br"),t._v(" "),i("br"),t._v(" "),t.deskripsi.length>0?i("div",{staticClass:"tab-deskripsi"},[i("v-tabs",{attrs:{"background-color":"cyan",dark:"","next-icon":"mdi-arrow-right-bold-box-outline","prev-icon":"mdi-arrow-left-bold-box-outline","show-arrows":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[i("v-tabs-slider",{attrs:{color:"yellow"}}),t._v(" "),t._l(t.deskripsi,(function(e,n){return i("v-tab",{key:n},[t._v("\n                            "+t._s(e.title)+"\n                        ")])}))],2),t._v(" "),i("v-tabs-items",{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},t._l(t.deskripsi,(function(e,n){return i("v-tab-item",{key:n},[i("v-card",[i("v-card-text",{staticStyle:{position:"relative"},domProps:{innerHTML:t._s(e.deskripsi)}}),t._v(" "),i("div",{staticStyle:{position:"absolute",top:"0px",right:"0px"}},[i("v-btn",{attrs:{depressed:"",dark:"","x-small":"",color:"success"},on:{click:function(e){return t.edit(n)}}},[i("v-icon",{attrs:{dark:"",small:""}},[t._v("fal fa-pencil")])],1),t._v(" "),i("v-btn",{attrs:{depressed:"",dark:"","x-small":"",color:"red"},on:{click:function(e){return t.hapus(n)}}},[i("v-icon",{attrs:{dark:"",small:""}},[t._v("fal fa-trash")])],1)],1)],1)],1)})),1)],1):t._e(),t._v(" "),i("v-row",[i("v-col",{attrs:{cols:"12",align:"right"}},[i("v-btn",{staticStyle:{color:"white !important"},attrs:{disabled:t.loading,color:"red",tile:""},on:{click:function(e){return t.$router.go(-1)}}},[t._v("\n                            Batal\n                            ")]),t._v(" "),i("v-btn",{attrs:{disabled:!t.valid,color:"success",tile:"",loading:t.loading},on:{click:function(e){return t.save()}}},[t._v("\n                            Simpan\n                            ")])],1)],1)],1)],1)],1),t._v(" "),i("v-card-actions",{})],1)],1),t._v(" "),i("v-dialog",{attrs:{width:"650"},model:{value:t.DataDialog,callback:function(e){t.DataDialog=e},expression:"DataDialog"}},[i("v-card",{attrs:{tile:""}},[i("v-card-title",{staticClass:"white--text",style:t.backgroundColor,attrs:{"primary-title":""}},[t._v("\n      Tambah deskripsi\n    ")]),t._v(" "),i("v-card-text",[i("v-text-field",{attrs:{label:"Title",required:""},model:{value:t.deskrip.title,callback:function(e){t.$set(t.deskrip,"title",e)},expression:"deskrip.title"}}),t._v(" "),i("tiptap-vuetify",{attrs:{extensions:t.extensions},model:{value:t.deskrip.deskripsi,callback:function(e){t.$set(t.deskrip,"deskripsi",e)},expression:"deskrip.deskripsi"}})],1),t._v(" "),i("v-divider"),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{staticClass:"white--text",attrs:{color:"red",tile:""},on:{click:function(e){return t.cancle()}}},[t._v("\n        Cancel\n      ")]),t._v(" "),i("v-btn",{attrs:{color:"success",tile:""},on:{click:function(e){return t.tambah()}}},[t._v("\n        Save\n      ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=d.exports}}]);