{"version":3,"sources":["webpack:///./resources/js/views/role-management/edit.vue?655e","webpack:///resources/js/views/role-management/edit.vue","webpack:///./resources/js/views/role-management/edit.vue?393e","webpack:///./resources/js/views/role-management/edit.vue"],"names":["pesan","color_snakbar","status","component","_vm","this","_h","$createElement","_c","_self","attrs","role","_v","style","staticClass","on","$event","chekAll","model","value","callback","$$v","checkbox","expression","loading","save","_l","menu","index","key","_s","description","chekParent","$set","show","child","length","i","chekChild","_e"],"mappings":"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","file":"27.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-container',[_c('BtnJudul',{attrs:{\"text\":_vm.role}}),_vm._v(\" \"),_c('v-card',{style:(_vm.border),attrs:{\"tile\":\"\"}},[_c('v-card-text',[_c('v-card',{staticClass:\"mx-auto\",attrs:{\"outlined\":\"\"}},[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(\"Menu\")])],1),_vm._v(\" \"),_c('v-list-item-action',[_c('v-checkbox',{on:{\"change\":function($event){return _vm.chekAll()}},model:{value:(_vm.checkbox),callback:function ($$v) {_vm.checkbox=$$v},expression:\"checkbox\"}})],1),_vm._v(\" \"),_c('v-btn',{staticClass:\"mr-3\",attrs:{\"color\":\"success\",\"loading\":_vm.loading,\"small\":\"\",\"tile\":\"\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"Simpan\")]),_vm._v(\" \"),_c('v-btn',{attrs:{\"color\":\"primary\",\"to\":\"/menu\",\"small\":\"\",\"tile\":\"\"}},[_vm._v(\"\\n                                Menu Management\\n                        \")])],1),_vm._v(\" \"),_c('v-card-text',_vm._l((_vm.menus),function(menu,index){return _c('v-card',{key:index,staticClass:\"mt-4\"},[_c('v-list-item',[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(menu.description))])],1),_vm._v(\" \"),_c('v-list-item-action',[_c('v-checkbox',{on:{\"change\":function($event){return _vm.chekParent(index)}},model:{value:(menu.checkbox),callback:function ($$v) {_vm.$set(menu, \"checkbox\", $$v)},expression:\"menu.checkbox\"}})],1),_vm._v(\" \"),_c('v-list-item-action',[_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.show(index)}}},[_c('v-icon',[_vm._v(_vm._s(menu.show ? 'mdi-chevron-up' : 'mdi-chevron-down'))])],1)],1)],1),_vm._v(\" \"),_c('v-divider'),_vm._v(\" \"),(menu.show && menu.child.length > 0)?_c('v-card-text',[_vm._l((menu.child),function(child,i){return _c('v-list-item',{key:i},[_c('v-list-item-content',[_c('v-list-item-title',[_vm._v(_vm._s(child.description))])],1),_vm._v(\" \"),_c('v-list-item-action',[_c('v-checkbox',{on:{\"change\":function($event){return _vm.chekChild(index,i)}},model:{value:(child.checkbox),callback:function ($$v) {_vm.$set(child, \"checkbox\", $$v)},expression:\"child.checkbox\"}})],1)],1)}),_vm._v(\" \"),_c('v-divider')],2):_vm._e()],1)}),1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <v-app>\n        <v-container >\n            <BtnJudul :text=\"role\"/>\n            <v-card\n            :style=\"border\"\n            tile\n            >\n                <v-card-text>\n                    <v-card\n                        class=\"mx-auto\"\n                        outlined\n                    >\n                        <v-list-item>\n                            <v-list-item-content>\n                                <v-list-item-title>Menu</v-list-item-title>\n                            </v-list-item-content>\n                            <v-list-item-action>\n                            <v-checkbox\n                                v-model=\"checkbox\"\n                                @change=\"chekAll()\"\n                            >\n                            </v-checkbox>\n                            </v-list-item-action>\n                            <v-btn color=\"success\" class=\"mr-3\" @click=\"save()\" :loading=\"loading\" small tile >Simpan</v-btn>\n\n                            <v-btn color=\"primary\"  to=\"/menu\" small tile>\n                                    Menu Management\n                            </v-btn>\n                        </v-list-item>\n\n                        <v-card-text>\n                            <v-card v-for=\"(menu,index) in menus\" :key=\"index\" class=\"mt-4\">\n                                <v-list-item>\n                                    <v-list-item-content>\n                                        <v-list-item-title>{{menu.description}}</v-list-item-title>\n                                    </v-list-item-content>\n                                    <v-list-item-action>\n                                    <v-checkbox\n                                        v-model=\"menu.checkbox\"\n                                        @change=\"chekParent(index)\"\n                                    >\n                                    </v-checkbox>\n                                    </v-list-item-action>\n\n                                    <v-list-item-action>\n                                    <v-btn\n                                        icon\n                                        @click=\"show(index)\"\n                                    >\n                                        <v-icon>{{menu.show ? 'mdi-chevron-up' : 'mdi-chevron-down'}}</v-icon>\n                                    </v-btn>\n                                    </v-list-item-action>\n                                </v-list-item>\n                                <v-divider></v-divider>\n                                <v-card-text v-if=\"menu.show && menu.child.length > 0\">\n                                    <v-list-item v-for=\"(child,i) in menu.child\" :key=\"i\">\n                                        <v-list-item-content>\n                                            <v-list-item-title>{{child.description}}</v-list-item-title>\n                                        </v-list-item-content>\n                                        <v-list-item-action>\n                                        <v-checkbox\n                                            v-model=\"child.checkbox\"\n                                            @change=\"chekChild(index,i)\"\n                                        >\n                                        </v-checkbox>\n                                        </v-list-item-action>\n                                    </v-list-item>\n                                    <v-divider></v-divider>\n\n                                </v-card-text>\n                            </v-card>\n                        </v-card-text>\n                    </v-card>\n                </v-card-text>\n\n            </v-card>\n        </v-container>\n    </v-app>\n\n</template>\n<script>\n\nimport {mapActions} from 'vuex'\nimport middleware from '../../mixins/middleware'\nexport default {\n    data: () => ({\n        menus:[],\n        parentMenu:[],\n        role:'',\n        childMenu:[],\n        checkbox:false,\n        loading:false\n    }),\n\n    methods: {\n        ...mapActions({\n             setSnakbar: 'snakbar/setSnakbar',\n             setAuth : 'auth/setAuth'\n        }),\n        show(index){\n            let menu = this.menus.find((item,i) => i === index)\n            menu.show = menu.show == false ? true : false\n            this.menus.splice(index,1,menu)\n        },\n\n        chekParent(index){\n            let menu = this.menus.find((item,i)  => i === index)\n\n            // console.log(menu)\n            if (menu.checkbox === false) {\n                let idParent = this.parentMenu.indexOf(menu.id)\n                this.parentMenu.splice(idParent,1)\n                // console.log(this.parentMenu)\n            }else{\n                this.parentMenu.push(menu.id)\n                // console.log(this.parentMenu)\n            }\n        },\n\n        chekChild(indexParent,indexChild){\n            let menu = this.menus.find((item,i)  => i === indexParent)\n            let child = menu.child.find((item,i) => i === indexChild)\n            if (child.checkbox === false) {\n                let idChild = this.childMenu.indexOf(child.id)\n                this.childMenu.splice(idChild,1)\n            }else{\n                this.childMenu.push(child.id)\n            }\n        },\n\n        async save(){\n            this.loading = true\n            let url = window.location.pathname\n            url = url.split('/')\n            let data = new FormData()\n            data.append('id_role', url[2])\n            data.append('parent_menu',JSON.stringify(this.parentMenu))\n            data.append('child_menu',JSON.stringify(this.childMenu))\n            url = url[1]\n\n            await this.axios.post(url,data,this.config)\n            .then((ress) => {\n                // console.log(ress)\n                this.setSnakbar({\n                    pesan:ress.data.message,\n                    color_snakbar:'success',\n                    status : true,\n                })\n                this.me()\n            })\n            .catch((err) => {\n                console.log(err.response)\n            })\n\n            this.loading =false\n        },\n\n        me(){\n            this.axios.get('/me',this.config)\n            .then((ress) => {\n                this.setAuth({\n                    menu:ress.data.menu,\n                    user:ress.data.user,\n                    token:ress.data.access_token\n                })\n            })\n            .catch((err) =>console.log(err.response))\n        },\n\n        chekAll(){\n            this.parentMenu=[]\n            this.childMenu= []\n            this.menus.forEach(data => {\n                data.checkbox = this.checkbox ? true : false\n                if (this.checkbox) this.parentMenu.push(data.id)\n                data.child.forEach(datas => {\n                    datas.checkbox = this.checkbox ? true : false\n                    if(this.checkbox) this.childMenu.push(datas.id)\n                })\n            })\n\n            // console.log(this.parentMenu)\n            // console.log(this.childMenu)\n        },\n\n        go(){\n            let url = window.location.pathname\n            this.axios.get(url,this.config)\n            .then((ress) => {\n                console.log(ress)\n                this.parentMenu = ress.data.role_menu ? ress.data.role_menu.parent : []\n                this.childMenu = ress.data.role_menu ? ress.data.role_menu.child : []\n                this.role = ress.data.role\n                ress.data.menu.forEach(data => {\n                    let child = []\n                    let checkbox =this.parentMenu.find((item) => item === data.id) ? true : false\n                    if (data.status_child === 1 ) {\n                        data.child_menu.forEach(datas => {\n                            let checkbox_child = this.childMenu.find((item) => item === datas.id) ? true : false\n                            child.push({\n                                id:datas.id,\n                                description:datas.description,\n                                checkbox:checkbox_child\n                            })\n                        })\n                    }\n                    let menu = {\n                        description: data.description,\n                        id: data.id,\n                        show:true,\n                        child:child,\n                        checkbox: checkbox\n                    }\n                    this.menus.push(menu)\n            });\n        })\n        .catch((err) => {\n            console.log(err.response)\n        })\n        }\n    },\n\n    created(){\n        this.go()\n    },\n\n    mixins:[middleware]\n}\n</script>\n","import mod from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/babel-loader/lib/index.js??ref--4-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./edit.vue?vue&type=template&id=4272f024&\"\nimport script from \"./edit.vue?vue&type=script&lang=js&\"\nexport * from \"./edit.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}